"use strict";(self.webpackChunkwiki_base=self.webpackChunkwiki_base||[]).push([[9054],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>d});var n=r(67294);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var i=n.createContext({}),c=function(e){var t=n.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},b=n.forwardRef((function(e,t){var r=e.components,s=e.mdxType,a=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),b=c(r),d=s,h=b["".concat(i,".").concat(d)]||b[d]||p[d]||a;return r?n.createElement(h,o(o({ref:t},u),{},{components:r})):n.createElement(h,o({ref:t},u))}));function d(e,t){var r=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var a=r.length,o=new Array(a);o[0]=b;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:s,o[1]=l;for(var c=2;c<a;c++)o[c]=r[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}b.displayName="MDXCreateElement"},53464:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var n=r(87462),s=(r(67294),r(3905));const a={sidebar_position:7},o="KB:1007",l={unversionedId:"kb/tutorials/kb-1007",id:"kb/tutorials/kb-1007",title:"KB:1007",description:"----------",source:"@site/docs/kb/tutorials/kb-1007.md",sourceDirName:"kb/tutorials",slug:"/kb/tutorials/kb-1007",permalink:"/kb/tutorials/kb-1007",draft:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7}},i={},c=[],u={toc:c};function p(e){let{components:t,...a}=e;return(0,s.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"kb1007"},"KB:1007"),(0,s.kt)("hr",null),(0,s.kt)("h1",{id:"how-to-choose-server-groups-based-on-http-request-"},"How to choose server groups based on HTTP request ?"),(0,s.kt)("p",null,"Haltdos WAF supports the upstream rule. The upstream rule can help the user to forward the request to desired backend server/server group. "),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"kb-1007",src:r(53650).Z,width:"1566",height:"651"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Problem Statement")),(0,s.kt)("p",null,"The client wants some requests to be served by one particular server group or DC and other requests to be served by another DC or a different server group."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Solution")),(0,s.kt)("p",null,"To achieve the above scenario, we can use the upstream rules. Start by simply creating different server groups and servers inside them. No one has to go inside the upstream rule section and create the rule such that one chooses which server group will serve the request and also mentions the condition for the same."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Steps to Solve")),(0,s.kt)("p",null,"1: First of all we create a server group with desired backend IP. for example our backend."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"kb-1007",src:r(70644).Z,width:"1642",height:"801"})),(0,s.kt)("p",null,"2: We need to make an upstream rule so that desired server will serve the request."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"kb-1007",src:r(2380).Z,width:"1635",height:"806"})),(0,s.kt)("p",null,"3: Now as the website is bound with the false backend server. It'll not be served properly."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"kb-1007",src:r(47381).Z,width:"1913",height:"956"})),(0,s.kt)("p",null,"4: Now if we set the upstream rule upstream to default real server."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"kb-1007",src:r(28747).Z,width:"1638",height:"835"})),(0,s.kt)("p",null,"5: As a result, now we are able to reach the website as its served by a real backend server/server group"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"kb-1007",src:r(14630).Z,width:"1911",height:"931"})),(0,s.kt)("p",null,"Here, we are not able to get the response from the actual server because the end-user request has been served by the correct server group."))}p.isMDXComponent=!0},53650:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/kb7-740fb7f971a660855727c175597784a1.png"},70644:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/kb72-3ef51b0fc007b77be31a47ea428a8113.png"},2380:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/kb73-f63c3e7a9acd2d1d6f89a857bdc38cf0.png"},47381:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/kb74-3b55c7b9c34b71fbaa72be67b87a2cf8.png"},28747:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/kb75-197a96a59a6e41c49f78b9444bfdfaf2.png"},14630:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/kb76-6c6bbfce68a2680fb6c2ddc9b7201e86.png"}}]);